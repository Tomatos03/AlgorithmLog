# [904. 水果成篮](https://leetcode.cn/problems/fruit-into-baskets/)

## 解题思路

1. 抽象题意可以得到:  在原数组之中找到一个子数组, 子数组之中最多包含两个不同的元素
1. 利用map和双指针一边遍历一边维护满足上述条件的子区间, 并记录区间的长度

```cpp
using i32 = int;
class Solution {
public:
    int totalFruit(vector<int>& fruits) {
        map<i32, i32> mp;
        i32 ans = 0, n = fruits.size();
        for (int i = 0, j = 0; i < n; ++i) {
            mp[fruits[i]]++;
            while (mp.size() > 2) {
                --mp[fruits[j]];
                if (mp[fruits[j]] == 0)
                    mp.erase(fruits[j]);
                ++j;
            }
            i32 cnt =  0;
            for (auto [_, v] : mp) 
                cnt += v;
            ans = max(ans, cnt);
        }
        return ans;
    }
};

```