# [1792. 最大平均通过率](https://leetcode.cn/problems/maximum-average-pass-ratio/)

## 解题思路

1. 每次选择通过率增量最大的那个班级,添加一个$100\%$通过考试的学生
2. 想要知道那个班增量是最大的, 可以使用优先队列预先存储每个班级的通过率增量. 在查询最大的增量的时候, 只需要$O(logn)$的时间复杂度

## 参考代码


```cpp
using i32 = int;
using i64 = long long;
using pii = pair<int, int>;
using pll = pair<i64, i64>;
using tdii = tuple<double, int, int>;
const int mod = 1000000007, mod0 = 998244353;
class Solution {
    double cal_d(int pass, int total) {
        return cal(pass + 1, total + 1) - cal(pass, total);
    }

    double cal(int pass, int total) {
        return pass * 1.0 / total;
    }

  public:
    double maxAverageRatio(vector<vector<int>> &classes, int extraStudents) {
        vector<vector<int>> &c = classes;
        int n = c.size();
        priority_queue<tdii> pq;

        for (int i = 0; i < n; ++i) {
            int pass = c[i][0], total = c[i][1];

            pq.push({cal_d(pass, total), pass, total});
        }

        while (extraStudents > 0) {
            auto [_, pass, total] = pq.top();
            pq.pop();

            ++pass, ++total;
            pq.push({cal_d(pass, total),  pass, total});
            --extraStudents;
        }

        double ans = 0;
        while (!pq.empty()) {
            auto [_, pass, total] = pq.top();

            ans += cal(pass, total);
            pq.pop();
        }
        ans /= n;
        return ans;
    }
};

```

