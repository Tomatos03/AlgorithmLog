# [3408. 设计任务管理器](https://leetcode.cn/problems/design-task-manager/)

## 解题思路

1. 一个$map<int, int>$任务id与优先权的映射, 另一个$map<pair<int,int>, int>$存储(优先权, 任务id)与用户id的映射


##  参考代码


```cpp
using pii = pair<int, int>;
class TaskManager {
    map<pii, int> priority_mp;
    map<int, int> task_mp;

public:
    TaskManager(vector<vector<int>>& tasks) {
        for (vector<int> &task : tasks) {
            priority_mp[{task[2], task[1]}] = task[0];
            task_mp[task[1]] = task[2];
        }
    }

    void add(int userId, int taskId, int priority) {
        priority_mp[{priority, taskId}] = userId;
        task_mp[taskId] = priority;
    }

    void edit(int taskId, int newPriority) {
        int pre_userId = priority_mp[{task_mp[taskId], taskId}];
        priority_mp.erase({task_mp[taskId], taskId});

        task_mp[taskId] = newPriority;
        priority_mp[{newPriority, taskId}] = pre_userId;
    }

    void rmv(int taskId) {
        priority_mp.erase({task_mp[taskId], taskId});
        task_mp.erase(taskId);
    }

    int execTop() {
        if (priority_mp.empty()) {
            return -1;
        }

        auto[priorityId, taskId] = priority_mp.rbegin()->first;
        int userId = priority_mp[{priorityId, taskId}];
        priority_mp.erase({priorityId, taskId});

        task_mp.erase(taskId);
        return userId;
    }
};

```
