# [2210. 统计数组中峰和谷的数量](https://leetcode.cn/problems/count-hills-and-valleys-in-an-array/)

## 解题思路

1. 对于相邻且相等的数当成一个组(整体)来处理,如果满足条件贡献总是$1$

2. 设$l, r$表示此时组(组中的数都是相等的)的左右端点, 如果满足:

   + $(nums[l - 1] - nums[l]) \times (nums[r + 1] - nums[r]) > 0, 其中l \ge 1 \and r \leq n - 1$

   那么必然是一个峰或谷

```cpp
using i32 = int;
using pis = pair<i32, string>;
class Solution {
public:
    int countHillValley(vector<int>& nums) {
        i32 ans = 0, n = nums.size(), i = 1;
        while (i < n) {
            int pre_i = i;
            while (i + 1 < n && nums[i + 1] == nums[i])
                ++i;

            i32 same = (i + 1 < n) && ((nums[pre_i - 1] - nums[pre_i]) * (nums[i + 1] - nums[i]) > 0);
            ans += same;
            ++i;
        }
        return ans;
    }
};

```