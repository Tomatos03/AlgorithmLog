# [611. 有效三角形的个数](https://leetcode.cn/problems/valid-triangle-number/)

## 解题思路

1. 排序不影响最后的结果, 先对原数组进行排序
1. 一个有效的三角形满足$a + b > c$, 其中$a$和$b$是三角形中最短的两条边
1. 枚举三角形最短的两条边$nums[i], nums[j], j > i$, 利用二分查找在$[j + 1, n)$中查找满足$nums[k] \geq nums[i] + nums[j]$的第一个位置, 此时$[j + 1, k)$之间的值任取一个都小于$nums[i] + nums[j]$, 对于答案的贡献为$k - (j + 1)$ 


## 参考代码

+ 时间复杂度$O(n^2 \log{n})$


```java
class Solution {
    public int triangleNumber(int[] nums) {
        int n = nums.length;
        Arrays.sort(nums);

        int cnt = 0;
        for (int i = 0; i < n; ++i) {
            for (int j = i + 1; j < n; ++j) {
                int v = nums[i] + nums[j];
                int l = j + 1, r = n;
                while (l < r) {
                    int mid = l + r >> 1;
                    if (v > nums[mid]) {
                        l = mid + 1;
                    } else {
                        r = mid;
                    }
                }
                cnt += l - (j + 1);
            }
        }
        return cnt;
    }
}

```
